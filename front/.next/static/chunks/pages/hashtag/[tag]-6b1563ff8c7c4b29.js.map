{"version":3,"file":"static/chunks/pages/hashtag/[tag]-6b1563ff8c7c4b29.js","mappings":"AEACA,CAAAA,KAAK,gBAAmB,CAAGA,KAAK,gBAAmB,EAAI,EAAE,EAAEC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAElE,MACC,SAASC,CAAuB,CAAEC,CAAmB,CAAEC,CAAmB,CAAE,CAEnF,aACAA,EAAoBC,CAAC,CAACF,GACDC,EAAoBE,CAAC,CAACH,EAAqB,CACzC,QAAW,UAAW,CAAE,OAAqBI,CAAS,CACxD,GACA,IAAIC,EAAqCJ,EAAoB,OACzDK,EAA2CL,EAAoB,OAC/DM,EAA2CN,EAAoB,OAE/DO,EAA8CP,EAAoB,OAClEQ,EAAoDR,EAAoB,OACxES,EAAqDT,EAAoB,OFhBlGU,EAAAV,EAAA,OA0EAG,EAAA,EAAAJ,CAAAA,EAAA,QA3DgB,UAAG,CACjB,IAAMY,EAAS,GAAAN,EAAfO,EAAA,IACAC,EAAAC,CAAgB,EAAMR,EAAtBS,SAAA,IAAAC,KAAA,CAAAH,GAAA,CAEEI,EAAA,GAAAZ,EAAAa,EAAA,WAAAC,CAAA,EADF,OAAAA,EAAAC,IAAA,GAAmBC,EAAnBJ,EAAAI,SAAmB,CAAcC,EAAAL,EAAjCK,YAAiC,CAAjCC,EAAAN,EAAAM,gBAAA,CA4BE,MAxBc,GACdnB,EAAuBoB,SAAA,iBACrBC,EACS,UAAsB,CAG7BC,OAAIC,WAAgB,CAACC,SAAAC,eAAkB,CAAAC,YAAA,CAAAF,SAAAC,eAAA,CAAAE,YAAA,MACrCT,GAAS,CAAAC,GAAAZ,EACD,CACNqB,KAAMzB,EAFC0B,EAAA,CAKPC,OAAMb,CAAA,CAAAA,EAAAc,MAAA,KAAAd,CAAA,CAAAA,EAAAc,MAAA,IAAAC,EAAA,CALRC,KAAAxB,CAOD,EAbL,EAiBa,OAAba,OAAOY,gBAAM,UAAAb,GACX,UAAO,CADTC,OAAAa,mBAAA,UAAAd,EAlBO,CAuBT,GAAAJ,EAAAc,MACE,CAAAb,EAAAT,EAAAU,EAAA,EACG,CAAS,EAACb,EAAI8B,GAAA,EAAA/B,EAAAgC,CAAA,EAAAC,SAAArB,EAAAsB,GACb,UAAAC,CAAA,QAA2B,GAAAlC,EAAA8B,GAAA,EAAAhC,EAAAiC,CAAA,EAA3BrB,KADawB,CAAd,EAAAA,EAAAR,EAAA,CAFL,EA/BF,GA4DA,gBAAAtC,CAAA,CAAA+C,CAAA,CAAA7C,CAAA,ECxEA,CAAA0B,OAAAoB,QAAA,CAAApB,OAAAoB,QAAA,MAAAjD,IAAA,EACA,iBACA,UAAe,CACf,OAAAG,EAAA,MACA,EACA,CAKA,YAAAA,CAAA,EAAAA,EAAA+C,CAAA,uDAAA/C,EAAAA,EAAAgD,CAAA,SAAAC,KAAAjD,EAAA+C,CAAA","sources":["webpack://_N_E/./pages/hashtag/[tag].tsx","webpack://_N_E/?4e2a","webpack://_N_E/<anon>"],"sourcesContent":["// hashtag/[tag].js\r\nimport React, { FC, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useRouter } from \"next/router\";\r\nimport { END } from \"redux-saga\";\r\n\r\nimport axios from \"axios\";\r\nimport { LOAD_HASHTAG_POSTS_REQUEST } from \"../../reducers/post\";\r\nimport PostCard from \"../../components/PostCard\";\r\nimport wrapper from \"../../store/configureStore\";\r\nimport { LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\r\nimport AppLayout from \"../../components/AppLayout\";\r\nimport { reducerType } from \"../../reducers\";\r\n\r\nconst Hashtag: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { tag } = router.query;\r\n  const { mainPosts, hasMorePosts, loadPostsLoading } = useSelector(\r\n    (state: reducerType) => state.post\r\n  );\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => {\r\n      if (\r\n        window.pageYOffset + document.documentElement.clientHeight >\r\n        document.documentElement.scrollHeight - 300\r\n      ) {\r\n        if (hasMorePosts && !loadPostsLoading) {\r\n          dispatch({\r\n            type: LOAD_HASHTAG_POSTS_REQUEST,\r\n            lastId:\r\n              mainPosts[mainPosts.length - 1] &&\r\n              mainPosts[mainPosts.length - 1].id,\r\n            data: tag,\r\n          });\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener(\"scroll\", onScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", onScroll);\r\n    };\r\n  }, [mainPosts.length, hasMorePosts, tag, loadPostsLoading]);\r\n\r\n  return (\r\n    <AppLayout>\r\n      {mainPosts.map((c) => (\r\n        <PostCard key={c.id} post={c} />\r\n      ))}\r\n    </AppLayout>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(\r\n  async (context) => {\r\n    const cookie = context.req ? context.req.headers.cookie : \"\";\r\n    console.log(context);\r\n    axios.defaults.headers.Cookie = \"\";\r\n    if (context.req && cookie) {\r\n      axios.defaults.headers.Cookie = cookie;\r\n    }\r\n    context.store.dispatch({\r\n      type: LOAD_MY_INFO_REQUEST,\r\n    });\r\n    context.store.dispatch({\r\n      type: LOAD_HASHTAG_POSTS_REQUEST,\r\n      data: context.params.tag,\r\n    });\r\n    context.store.dispatch(END);\r\n    await context.store.sagaTask.toPromise();\r\n  }\r\n);\r\n\r\nexport default Hashtag;\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/hashtag/[tag]\",\n      function () {\n        return require(\"private-next-pages/hashtag/[tag].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/hashtag/[tag]\"])\n      });\n    }\n  ","(self[\"webpackChunk_N_E\"] = self[\"webpackChunk_N_E\"] || []).push([[178],{\n\n/***/ 68906:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"__N_SSP\": function() { return /* binding */ __N_SSP; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67294);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25617);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11163);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _reducers_post__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(33796);\n/* harmony import */ var _components_PostCard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(33768);\n/* harmony import */ var _components_AppLayout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97988);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(85893);\n// hashtag/[tag].js\n\n\n\n\n\n\n\n\nvar Hashtag = function Hashtag() {\n  var dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__/* .useDispatch */ .I0)();\n  var router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n  var tag = router.query.tag;\n\n  var _useSelector = (0,react_redux__WEBPACK_IMPORTED_MODULE_1__/* .useSelector */ .v9)(function (state) {\n    return state.post;\n  }),\n      mainPosts = _useSelector.mainPosts,\n      hasMorePosts = _useSelector.hasMorePosts,\n      loadPostsLoading = _useSelector.loadPostsLoading;\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var onScroll = function onScroll() {\n      if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n        if (hasMorePosts && !loadPostsLoading) {\n          dispatch({\n            type: _reducers_post__WEBPACK_IMPORTED_MODULE_3__/* .LOAD_HASHTAG_POSTS_REQUEST */ .az,\n            lastId: mainPosts[mainPosts.length - 1] && mainPosts[mainPosts.length - 1].id,\n            data: tag\n          });\n        }\n      }\n    };\n\n    window.addEventListener(\"scroll\", onScroll);\n    return function () {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [mainPosts.length, hasMorePosts, tag, loadPostsLoading]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components_AppLayout__WEBPACK_IMPORTED_MODULE_5__/* [\"default\"] */ .Z, {\n    children: mainPosts.map(function (c) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components_PostCard__WEBPACK_IMPORTED_MODULE_4__/* [\"default\"] */ .Z, {\n        post: c\n      }, c.id);\n    })\n  });\n};\n\nvar __N_SSP = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Hashtag);\n\n/***/ }),\n\n/***/ 6955:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/hashtag/[tag]\",\n      function () {\n        return __webpack_require__(68906);\n      }\n    ]);\n    if(false) {}\n  \n\n/***/ })\n\n},\n/******/ function(__webpack_require__) { // webpackRuntimeModules\n/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }\n/******/ __webpack_require__.O(0, [885,177,667,623,741,774,888,179], function() { return __webpack_exec__(6955); });\n/******/ var __webpack_exports__ = __webpack_require__.O();\n/******/ _N_E = __webpack_exports__;\n/******/ }\n]);"],"names":["self","push","__unused_webpack_module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react__WEBPACK_IMPORTED_MODULE_0__","react_redux__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_2__","_reducers_post__WEBPACK_IMPORTED_MODULE_3__","_components_PostCard__WEBPACK_IMPORTED_MODULE_4__","_components_AppLayout__WEBPACK_IMPORTED_MODULE_5__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__","dispatch","I0","tag","router","useRouter","query","_useSelector","v9","state","post","mainPosts","hasMorePosts","loadPostsLoading","useEffect","onScroll","window","pageYOffset","document","documentElement","clientHeight","scrollHeight","type","az","lastId","length","id","data","addEventListener","removeEventListener","jsx","Z","children","map","c","__unused_webpack_exports","__NEXT_P","O","s","_N_E"],"sourceRoot":""}
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{63189:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return m},default:function(){return v}});var i=t(67294),r=t(25617),o=t(97988),a=t(33768),c=t(72640),u=t(80549),l=t(2831),s=t(11550),d=t(70648),f=t(33796),p=t(85893),h=function(){var n=(0,r.I0)(),e=(0,r.v9)(function(n){return n.post}),t=e.imagePaths,o=e.addPostDone,a=(0,d.Z)(""),h=(0,c.Z)(a,3),m=h[0],v=h[1],x=h[2],g=(0,i.useRef)(null);(0,i.useEffect)(function(){o&&x("")},[o]);var w=(0,i.useCallback)(function(){g.current.click()},[g.current]),E=(0,i.useCallback)(function(e){var t=new FormData;[].forEach.call(e.target.files,function(n){t.append("image",n)}),n({type:f.QA,data:t})},[]),_=(0,i.useCallback)(function(e){return function(){n({type:f.Po,data:e})}},[]),j=(0,i.useCallback)(function(){if(!m||!m.trim())return alert("게시글을 작성하세요.");var e=new FormData;t.forEach(function(n){e.append("image",n)}),e.append("content",m),n({type:f.z9,data:e})},[m,t]);return(0,p.jsxs)(u.Z,{style:{margin:"10px 0 20px"},encType:"multipart/form-data",onFinish:j,children:[(0,p.jsx)(l.Z.TextArea,{value:m,onChange:v,maxLength:140,placeholder:"텍스트를 입력해주시길 바랍니다."}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:g,onChange:E}),(0,p.jsx)(s.Z,{onClick:w,children:"이미지 업로드"}),(0,p.jsx)(s.Z,{type:"primary",style:{float:"right"},htmlType:"submit",children:"보내기"})]}),(0,p.jsx)("div",{children:t.map(function(n,e){return(0,p.jsxs)("div",{style:{display:"inline-block"},children:[(0,p.jsx)("img",{src:"http://localhost:3065/".concat(n),style:{width:"200px"},alt:n}),(0,p.jsx)("div",{children:(0,p.jsx)(s.Z,{onClick:_(e),children:"제거"})})]},n)})})]})},m=!0,v=function(){var n=(0,r.I0)(),e=(0,r.v9)(function(n){return n.user}).me,t=(0,r.v9)(function(n){return n.post}),c=t.mainPosts,u=t.hasMorePosts,l=t.loadPostsLoading,s=t.retweetError;return(0,i.useEffect)(function(){s&&alert(s)},[s]),(0,i.useEffect)(function(){function e(){if(window.pageYOffset+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&u&&!l){var e,t=null===(e=c[c.length-1])||void 0===e?void 0:e.id;n({type:f.aO,lastId:t})}}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[u,l,c]),(0,p.jsxs)(o.Z,{children:[e&&(0,p.jsx)(h,{}),c.map(function(n,e){return(0,p.jsx)(a.Z,{post:n},n.id)})]})}},48312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(63189)}])}},function(n){n.O(0,[885,177,667,623,741,774,888,179],function(){return n(n.s=48312)}),_N_E=n.O()}]);